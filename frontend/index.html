<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Телефонный справочник</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Istok+Web:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="header">
        <div class="header-left">
            <img src="images/logo.jpg" alt="Росатом" class="logo">
            <span class="company-name">РОСАТОМ</span>
        </div>
        <div class="header-center">
            <h1 onclick="location.href='index.html'">Телефонный справочник</h1>
        </div>
        <div class="header-right">
            <button class="btn-primary" onclick="location.href='login.html'">Войти</button>
        </div>
    </header>

    <main class="main-content">
        <aside class="sidebar">
            <div class="division-links">
                <a href="#" id="link-giredmet" onclick="switchDivision('giredmet')">Гиредмет</a> /
                <a href="#" id="link-graphite" onclick="switchDivision('graphite')">Графит</a>
            </div>
            <div id="division-button-container" style="margin-bottom: 20px; display: none;">
                <button class="btn-secondary" id="current-division-btn">Все контакты</button>
            </div>

            <ul class="department-list" id="department-list">
            </ul>
            <button class="add-btn" onclick="openAddDepartmentModal()">Добавить отдел</button>
        </aside>
        <section class="center-panel">
            <h2 class="header-text">Телефоны экстренных служб</h1>
                <div class="emergency-table-wrapper">
                    <table class="emergency-table">
                        <thead>
                            <tr>
                                <th>Наименование</th>
                                <th>Телефон</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Диспетчерская</td>
                                <td>+7 (495) 123-45-67</td>
                                <td>0707@rosatom.ru</td>
                            </tr>
                            <tr>
                                <td>Техническая поддержка</td>
                                <td>+7 (800) 755 75 23</td>
                                <td>support.fgisopvk@rosatom.ru</td>
                            </tr>
                            <tr>
                                <td>Пожарная охрана<br>и спасатели</td>
                                <td>101, 112</td>
                                <td>gu_moscow@77.mchs.gov.ru</td>
                            </tr>
                            <tr>
                                <td>Полиция</td>
                                <td>102</td>
                                <td>gu_moscow@77.mchs.gov.ru</td>
                            </tr>
                            <tr>
                                <td>Скорая помощь</td>
                                <td>103</td>
                                <td>gu_moscow@77.mchs.gov.ru</td>
                            </tr>
                            <tr>
                                <td>Газовая аварийная<br>служба</td>
                                <td>104</td>
                                <td>gu_moscow@77.mchs.gov.ru</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <section class="additional-info">
                    <h2 class="header-text2">Государственная корпорация по атомной энергии «Росатом»</h1>
                        <p><strong>Многоканальный телефон:</strong> (499) 949-4535 (с 09:00 до 18:00 по будням, в
                            пятницу – до 16:45)</p>
                        <p><strong>E-mail:</strong> info@rosatom.ru</p>
                        <p><strong>Департамент коммуникаций:</strong> (499) 949-4412, 949-4634, E-mail:
                            press@rosatom.ru, editor@rosatom.ru (об
                            ошибках на сайте)</p>
                        <p><strong>Департамент международного бизнеса:</strong> (499) 949-2537 (приемная)</p>
                        <p><strong>Департамент международного сотрудничества:</strong> (499) 949-2868 (приемная)</p>
                        <p><strong>Управление инвестиционной политики:</strong> E-mail: ir@rosatom.ru</p>
                        <p><strong>Управление документационного обеспечения:</strong> (499) 949-4221</p>
                        <p><strong>Департамент устойчивого развития:</strong> E-mail: esg@rosatom.ru</p>
                        <p><strong>Архив Росатома:</strong> (498) 658-6073 (с 09:00 до 18:00 по будням, в пятницу – до
                            16:45), E-mail:
                            adm@atomarhiv.ru, www.atomarhiv.ru</p>
                        <p><strong>«Горячая линия» Росатома по противодействию коррупции и хищениям:</strong> 8 800
                            100-0707, E-mail:
                            0707@rosatom.ru</p>
                </section>
        </section>


        <aside class="birthday-panel">
            <h3>Поздравляем<br>с Днём рождения!</h3>
            <img src="images/person.jpg" alt="Фото сотрудника" class="birthday-photo">
            <a href="contact.html" class="birthday-name">
                <br>Иванов Иван Иванович<br>
            </a>

            <div class="upcoming-birthdays">
                <h4>Дни рождения завтра:</h4>
                <ul class="birthday-list">
                    <li>Петров Пётр Петрович</li>
                    <li>Сидорова Марина Александровна</li>
                    <li>Кузнецов Иван Сергеевич</li>
                </ul>
            </div>
        </aside>
    </main>

    <footer class="footer">
        Если обнаружили неточности, напишите на почту it_rosatom@mail.ru
    </footer>
    <script>
        const departments = {
            giredmet: {
                "Инженерный": ["Разработка", "Проектирование", "Системный анализ"],
                "Коммуникации": ["Внутренние связи", "Внешние связи"],
                "Коммерческий": [],
                "Бухгалтерия": []
            },
            graphite: {
                "Проектный": ["Подготовка", "Реализация"],
                "Логистика": [],
                "Финансовый контроль": ["Аудит", "Бюджетирование"],
                "Отдел кадров": ["Подбор", "HR-аналитика"]
            }
        };

        function switchDivision(name) {
            const list = document.getElementById('department-list');

            list.innerHTML = '';

            Object.entries(departments[name]).forEach(([dept, subdepts]) => {
                const li = document.createElement('li');
                li.classList.add('department-item');
                li.innerHTML = `<span class="department-name">${dept}</span>`;


                if (subdepts.length > 0) {
                    const subList = document.createElement('ul');
                    subList.classList.add('subdepartment-list');
                    subList.style.display = 'none';

                    subdepts.forEach(sub => {
                        const subLi = document.createElement('li');
                        subLi.textContent = sub;
                        subLi.onclick = () => {
                            window.location.href = `departments.html?division=${encodeURIComponent(name)}&department=${encodeURIComponent(dept)}&subdepartment=${encodeURIComponent(sub)}`;
                        };
                        subList.appendChild(subLi);
                    });

                    li.appendChild(subList);
                    li.querySelector('.department-name').onclick = () => {
                        subList.style.display = subList.style.display === 'none' ? 'block' : 'none';
                    };
                } else {
                    li.onclick = () => {
                        window.location.href = `departments.html?division=${encodeURIComponent(name)}&department=${encodeURIComponent(dept)}`;
                    };
                }

                list.appendChild(li);
            });

            const buttonContainer = document.getElementById('division-button-container');
            const divisionButton = document.getElementById('current-division-btn');

            buttonContainer.style.display = 'block';
            divisionButton.textContent = `Все контакты ${capitalize(name)}`;
            divisionButton.onclick = () => {
                window.location.href = `division.html?division=${encodeURIComponent(name)}`;
            };

            document.getElementById('link-giredmet').classList.remove('active-division');
            document.getElementById('link-graphite').classList.remove('active-division');
            document.getElementById(`link-${name}`).classList.add('active-division');
        }

        function capitalize(str) {
            const map = {
                giredmet: "Гиредмет",
                graphite: "Графит"
            };
            return map[str.toLowerCase()] || str.charAt(0).toUpperCase() + str.slice(1);
        }


        window.onload = () => {
            switchDivision('giredmet');
        };


        function openAddDepartmentModal() {
            document.getElementById("addDepartmentModal").style.display = "flex";
        }

        function closeAddDepartmentModal() {
            document.getElementById("addDepartmentModal").style.display = "none";
        }

        window.onclick = function (event) {
            if (event.target === document.getElementById("addDepartmentModal")) {
                closeAddDepartmentModal();
            }

        };
    </script>



    <div id="addContactModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAddContactModal()">&times;</span>
            <h2>Добавление контакта</h2>
            <p class="modal-subtitle">Заполните поля</p>
            <form id="contactForm">
                <input type="text" placeholder="ФИО контакта" required>
                <input type="text" placeholder="Отдел" required>
                <input type="email" placeholder="Почта" required>
                <input type="tel" placeholder="Рабочий телефон" required>
                <input type="text" placeholder="Описание (опционально)">
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeAddContactModal()">Отмена</button>
                    <button type="submit" class="submit-btn">Добавить</button>
                </div>
            </form>
        </div>
    </div>
    <div id="addDepartmentModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeAddDepartmentModal()">&times;</span>
            <h2>Добавление отдела</h2>
            <p class="modal-subtitle">Укажите название отдела<br>Отдел будет добавлен в выбранный институт</p>
            <form id="departmentForm">
                <input type="text" placeholder="Название отдела" required>
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeAddDepartmentModal()">Отмена</button>
                    <button type="submit" class="submit-btn">Добавить</button>
                </div>
            </form>
        </div>
    </div>
    <div id="importModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeImportModal()">&times;</span>
            <h2>Импорт контактов</h2>
            <p class="modal-subtitle">Загрузите файл с контактами</p>
            <form id="uploadForm" enctype="multipart/form-data" method="post">
                <div class="file-upload-wrapper">
                    <label for="fileInput" class="file-upload-label">Выбрать файл</label>
                    <span id="fileName" class="file-name">Файл не выбран</span>
                    <input type="file" name="file" id="fileInput" required>
                </div>
                <div class="modal-buttons">
                    <button type="button" class="cancel-btn" onclick="closeImportModal()">Отмена</button>
                    <button type="submit" class="submit-btn">Импортировать</button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>
